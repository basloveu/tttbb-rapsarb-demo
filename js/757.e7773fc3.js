"use strict";(self["webpackChunkrapsarb"]=self["webpackChunkrapsarb"]||[]).push([[757],{757:function(e,t,l){l.r(t),l.d(t,{default:function(){return Ee}});var a=l(3396),s=l(7139),o=l(4870),i=l(9242),r=l(65),n=l(2483);const c={key:0},d={class:"row sticky-top fw-bolder"},u=(0,a._)("div",{class:"col-12 col-md-4"},null,-1),v={class:"col-12 col-md-4 text-center"},m={class:"col-12 col-md-4 text-end"},g={class:"row mt-2"},p=(0,a._)("div",{class:"col-12 col-md-3"},null,-1),_={class:"col-12 col-md-6"},b={class:"input-group mb-2"},w=["value"],f=["value"],y={class:"row mt-2"},D=(0,a._)("div",{class:"col-12 col-md-3"},null,-1),Y={class:"col-12 col-md-6"},h=["value"],H={class:"row mt-2"},k=(0,a._)("div",{class:"col-12 col-md-3"},null,-1),x={class:"col-12 col-md-6"},M=["value"],I={class:"row mt-2"},U=(0,a._)("div",{class:"col-12 col-md-3"},null,-1),S={class:"col-12 col-md-6"},C=["value"],E=["value"],z={class:"row mt-2"},j=(0,a._)("div",{class:"col-12 col-md-3"},null,-1),F={class:"col-12 col-md-6"},L=["value"],N={class:"mt-2"},R=["src"],P={class:"row"},q=(0,a._)("div",{class:"col-12 col-md-3"},null,-1),T={class:"col-12 col-md-6 mt-3 mb-3"},B=(0,a._)("label",{class:"form-check-label pointer fw-bold text-danger",for:"flexCheck"}," ฉันอ่านข้อความ,เนื้อหา,รูปภาพ และทำความเข้าใจทั้งหมดด้านบนเรียบร้อย ",-1),W={class:"row"},A=(0,a._)("div",{class:"col-12 col-md-3"},null,-1),V={class:"col-12 col-md-6"},O=(0,a._)("div",null,[(0,a._)("canvas",{id:"signature-pad",class:"w-100 border"})],-1),Z={class:"btn-group mt-2 mb-3",role:"group"},G=["disabled"],J=["disabled"],K={key:0,class:"fw-light text-danger"},Q={key:0,class:"row"},X=(0,a.uE)('<div class="col-12 col-md-3"></div><div class="col-12 col-md-6"><div class="mb-3"><div class="file-loading"><input id="input_file" name="input_file[]" type="file" accept=".jpg,.jpeg,.png" multiple></div></div></div>',2),ee=[X],te={class:"row"},le=(0,a._)("div",{class:"col-12 col-md-3"},null,-1),ae={class:"col-12 col-md-6"},se={class:"mb-3"},oe=(0,a._)("label",{for:"Textarea1",class:"form-label"},"หมายเหตุ",-1),ie={class:"row"},re=(0,a._)("div",{class:"col-12 col-md-3"},null,-1),ne={class:"col-12 col-md-6"},ce={class:"d-grid gap-1 mb-3"},de={key:0,class:"btn btn-primary",type:"button",disabled:""},ue={key:0,class:"btn btn-primary",type:"button",disabled:""},ve={key:1,class:"btn btn-danger",type:"button",disabled:""},me={key:1},ge=(0,a._)("div",{class:"alert alert-warning mt-2",role:"alert"}," ยังไม่เปิดให้ลงทะเบียน ! ",-1),pe=[ge],_e={key:2},be={class:"row"},we=(0,a._)("div",{class:"col-12 col-md-4"},null,-1),fe={class:"col-12 col-md-4 text-center"},ye={class:"col-12 col-md-4 text-end"},De={class:"row mt-2"},Ye=(0,a._)("div",{class:"col-12 col-md-3"},null,-1),he={class:"col-12 col-md-6"},He=["value"],ke=["value"],xe=(0,a._)("div",{class:"alert alert-warning mt-2",role:"alert"}," ไม่อยู่ในช่วงเวลาลงทะเบียน ! ",-1),Me={key:3},Ie=(0,a._)("div",{class:"alert alert-danger mt-2",role:"alert"},"ไม่พบเนื้อหา !",-1),Ue=[Ie];var Se={__name:"register",setup(e){const t=(0,r.oR)(),l=(0,n.yj)(),X=(0,o.iH)(""),ge=(0,o.iH)(""),Ie=((0,o.iH)(""),(0,o.iH)(!1)),Se=(0,o.iH)(!1),Ce=((0,o.iH)(""),(0,o.iH)("")),Ee=(0,o.iH)(""),ze=(0,o.iH)(""),$e=(0,o.iH)(""),je=(0,o.iH)(""),Fe=(0,o.iH)(""),Le=(0,o.iH)(""),Ne=(0,o.iH)(""),Re=(0,o.iH)(""),Pe=(0,o.iH)(!1),qe=(0,o.iH)(""),Te=(0,o.iH)(""),Be=(0,o.iH)(t.getters.get_simulate_db),We=(0,o.iH)("/tttbb_rapsarb_demo/"),Ae=(0,a.f3)("toast"),Ve=(0,a.f3)("m_format"),Oe=((0,a.f3)("e_tooltips"),(0,a.f3)("gtr_name"),(0,a.f3)("Hash_MD5"));(0,a.bv)((()=>{Ze(),Ge(new Date)}));const Ze=()=>{"undefined"!=typeof l.params.order&&""!=l.params.order?(X.value=l.params.order,Je()):alert("ไม่พบ Register ID")},Ge=e=>{ze.value=parseInt(e.getDate())<10?"0"+parseInt(e.getDate()):parseInt(e.getDate()),$e.value=parseInt(e.getMonth()+1)<10?"0"+parseInt(e.getMonth()+1):parseInt(e.getMonth()+1),je.value=e.getFullYear(),Fe.value=parseInt(e.getHours())<10?"0"+parseInt(e.getHours()):parseInt(e.getHours()),Le.value=parseInt(e.getMinutes())<10?"0"+parseInt(e.getMinutes()):parseInt(e.getMinutes()),Ne.value=je.value+"-"+$e.value+"-"+ze.value+" "+Fe.value+":"+Le.value},Je=()=>{X.value;for(let e=0;e<Be.value.length;e++){const l=Be.value[e];if(Oe(l.register_no)==X.value){const e=t.getters.get_m_topic.find((e=>e.key===l.m_topic));l.main_topic_name=e?e.text:l.m_topic;const a=t.getters.get_s_topic.find((e=>e.key===l.s_topic));l.sub_topic_name=a?a.text:l.s_topic,ge.value=l;break}}Re.value=Xe(ge.value.date1,ge.value.date2,ge.value.date1),setTimeout((()=>{1==Re.value&&Ke(),"Yes"==ge.value.check1&&et()}),2e3)},Ke=()=>{const e=Math.max(window.devicePixelRatio||1,1);$("#signature-pad").each((function(){this.width=this.offsetWidth*e,this.height=this.offsetHeight*e,$(this)[0].getContext("2d").scale(e,e)}));var l=new SignaturePad(document.getElementById("signature-pad"),{minWidth:1,maxWidth:2,penColor:"rgb(66, 133, 244)"}),a=document.getElementById("save"),s=document.getElementById("clear");a.addEventListener("click",(function(e){var a=l.toDataURL("image/png");Ce.value=a;(0,o.qj)({loginEID:encodeURIComponent(t.getters.get_eid),orderName:ge.value.register_no,orderID:Number(ge.value.register_no.replace(/[^0-9.]/g,"")),dataURL:Ce.value});Se.value=!0,Ae("แจ้งเตือน !","บันทึกลายเซ็น "+t.getters.get_eid+" เรียบร้อย","bg-success")})),s.addEventListener("click",(function(e){Se.value=!1,l.clear()}))},Qe=()=>{(0,o.qj)({loginEID:t.getters.get_eid,loginName:t.getters.get_name,loginEmail:t.getters.get_email,loginSection:t.getters.get_section,loginDivision:t.getters.get_division,loginDepName:t.getters.get_depname,loginCompany:t.getters.get_company,loginTitle:t.getters.get_title,orderName:ge.value.register_no,orderID:Number(ge.value.register_no.replace(/[^0-9.]/g,"")),note:Ee.value});Ae("แจ้งเตือน !",t.getters.get_eid+" รับทราบแล้ว","bg-success")},Xe=(e,t,l)=>{var a=e.split(" "),s=t.split(" "),o=l.split(" "),i=a[0].split("-"),r=s[0].split("-"),n=o[0].split("-"),c=a[1].split(":"),d=s[1].split(":"),u=o[1].split(":"),v=new Date(i[0],parseInt(i[1])-1,i[2],c[0],c[1]),m=new Date(r[0],parseInt(r[1])-1,r[2],d[0],d[1]),g=new Date(n[0],parseInt(n[1])-1,n[2],u[0],u[1]);return g>=v&&g<=m?"1":"3"},et=()=>{qe.value=ge.value.register_no,Te.value="ME-"+t.getters.get_eid+"-"+ge.value.register_no,$("#input_file").fileinput({theme:"bs5",allowedFileExtensions:["jpg","jpeg","png","xls","xlsx","pdf","doc","docx"],minFileCount:1,maxFileCount:6,overwriteInitial:!1,initialPreviewAsData:!0,maxFileSize:1e4,removeFromPreviewOnError:!0,preferIconicPreview:!1,previewFileExtSettings:{doc:function(e){return e.match(/(doc|docx)$/i)},xls:function(e){return e.match(/(xls|xlsx)$/i)},ppt:function(e){return e.match(/(ppt|pptx)$/i)},zip:function(e){return e.match(/(zip|rar|tar|gzip|gz|7z)$/i)},htm:function(e){return e.match(/(htm|html)$/i)},txt:function(e){return e.match(/(txt|ini|csv|java|php|js|css)$/i)},mov:function(e){return e.match(/(avi|mpg|mkv|mov|mp4|3gp|webm|wmv)$/i)},mp3:function(e){return e.match(/(mp3|wav)$/i)}},fileActionSettings:{showUpload:!1,showDownload:!1,showZoom:!1,showDrag:!0},uploadExtraData:function(){return{id:Te.value,eid:t.getters.get_eid}},browseLabel:"เลือกไฟล์",browseClass:"btn btn-primary",uploadLabel:"อัพโหลด",uploadClass:"btn btn-success active",removeLabel:"ล้าง",removeClass:"btn btn-danger"}).on("filebatchpreupload",(function(e,t,l,a){var s=t.files.length,o=s>1?s+" ไฟล์":"1 ไฟล์";if(!window.confirm("คุณต้องการ อัพโหลดไฟล์ จำนวน "+o+"?"))return{message:"Upload aborted!",data:{}}})).on("fileuploaded",(function(e,t){"success"==t.response.success&&"yes"==t.response.upload?Ae("แจ้งเตือน !","บันทึกไฟล์เรียบร้อย","bg-success"):"success"==t.response.success&&"yes"!=t.response.upload?(Pe.value=!1,Ae("แจ้งเตือน !","บันทึกไฟล์เรียบร้อย แต่บันทึกที่อยู่ไม่ได้","bg-warning")):Ae("แจ้งเตือน !","ผิดพลาด","bg-danger")}))};return(e,l)=>((0,a.wg)(),(0,a.iD)("div",null,[ge.value==[]&&""==ge.value||1!=Re.value?"off"==ge.value.open_register?((0,a.wg)(),(0,a.iD)("div",me,pe)):3==Re.value?((0,a.wg)(),(0,a.iD)("div",_e,[(0,a._)("div",be,[we,(0,a._)("div",fe,(0,s.zw)(ge.value.register_no),1),(0,a._)("div",ye,(0,s.zw)((0,o.SU)(Ve)(Ne.value,"H:mm DD-MM-YYYY")),1)]),(0,a._)("div",De,[Ye,(0,a._)("div",he,[(0,o.SU)(Ve)(ge.value.start_date,"YYYYMMDD")==(0,o.SU)(Ve)(ge.value.end_date,"YYYYMMDD")?((0,a.wg)(),(0,a.iD)("input",{key:0,class:"form-control border border-0 text-center",type:"text",value:"เวลา "+(0,o.SU)(Ve)(ge.value.start_date,"HH:mm")+" - "+(0,o.SU)(Ve)(ge.value.end_date,"HH:mm")+" วันที่ "+(0,o.SU)(Ve)(ge.value.start_date,"DD-MM-YYYY"),readonly:""},null,8,He)):((0,a.wg)(),(0,a.iD)("input",{key:1,class:"form-control border border-0 text-center",type:"text",value:"เริ่มต้น - สิ้นสุด : "+(0,o.SU)(Ve)(ge.value.start_date,"HH:mm DD-MM-YYYY")+" - "+(0,o.SU)(Ve)(ge.value.end_date,"HH:mm DD-MM-YYYY"),readonly:""},null,8,ke))])]),xe])):((0,a.wg)(),(0,a.iD)("div",Me,Ue)):((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",d,[u,(0,a._)("div",v,(0,s.zw)((0,o.SU)(t).getters.get_right_register)+(0,s.zw)(ge.value.register_no),1),(0,a._)("div",m,(0,s.zw)((0,o.SU)(Ve)(Ne.value,"HH:mm DD-MM-YYYY")),1)]),(0,a._)("div",g,[p,(0,a._)("div",_,[(0,a._)("div",b,[(0,a._)("input",{class:"form-control border border-0",type:"text",value:ge.value.main_topic_name,readonly:""},null,8,w),(0,a._)("input",{class:"form-control border border-0",type:"text",value:ge.value.sub_topic_name,readonly:""},null,8,f)])])]),(0,a._)("div",y,[D,(0,a._)("div",Y,[(0,a._)("input",{class:"form-control border border-0",value:ge.value.keyword,type:"text",readonly:""},null,8,h)])]),(0,a._)("div",H,[k,(0,a._)("div",x,[(0,a._)("textarea",{class:"form-control border border-0",value:ge.value.detail,rows:"8",readonly:""},null,8,M)])]),(0,a._)("div",I,[U,(0,a._)("div",S,[(0,o.SU)(Ve)(ge.value.start_date,"YYYYMMDD")==(0,o.SU)(Ve)(ge.value.end_date,"YYYYMMDD")?((0,a.wg)(),(0,a.iD)("input",{key:0,class:"form-control border border-0",type:"text",value:"เวลา "+(0,o.SU)(Ve)(ge.value.start_date,"HH:mm")+" - "+(0,o.SU)(Ve)(ge.value.end_date,"HH:mm")+" วันที่ "+(0,o.SU)(Ve)(ge.value.start_date,"DD-MM-YYYY"),readonly:""},null,8,C)):((0,a.wg)(),(0,a.iD)("input",{key:1,class:"form-control border border-0",type:"text",value:"วันเริ่มต้น - สิ้นสุด : "+(0,o.SU)(Ve)(ge.value.start_date,"HH:mm DD-MM-YYYY")+" - "+(0,o.SU)(Ve)(ge.value.end_date,"HH:mm DD-MM-YYYY"),readonly:""},null,8,E))])]),(0,a._)("div",z,[j,(0,a._)("div",F,[(0,a._)("input",{class:"form-control form-control-sm border border-0 fs-7 text-body-secondary",value:"สร้างโดย : "+ge.value.login_eid+" "+(0,o.SU)(Ve)(ge.value.date_key,"HH:mm DD-MM-YYYY"),type:"text",readonly:""},null,8,L)])]),(0,a._)("div",N,[ge.value.auto_num?((0,a.wg)(),(0,a.iD)("img",{key:0,src:We.value+"img/file/"+ge.value.auto_num+".png",class:"img-thumbnail"},null,8,R)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Uk)((0,s.zw)(ge.value.auto_num),1)],64))]),(0,a._)("div",P,[q,(0,a._)("div",T,[(0,a._)("div",{class:"form-check form-check-inline",onClick:l[1]||(l[1]=e=>Ie.value!=Ie.value)},[(0,a.wy)((0,a._)("input",{class:"form-check-input pointer border-1 shadow-sm",type:"checkbox","onUpdate:modelValue":l[0]||(l[0]=e=>Ie.value=e),id:"flexCheck"},null,512),[[i.e8,Ie.value]]),B])])]),(0,a._)("div",W,[A,(0,a._)("div",V,[O,(0,a._)("div",Z,[(0,a._)("button",{id:"save",class:"btn btn-success",type:"button",disabled:0==Ie.value}," บันทึก ลายเซ็น ",8,G),(0,a._)("button",{id:"clear",class:"btn btn-danger",type:"button",disabled:0==Ie.value}," ล้าง ลายเซ็น ",8,J)]),(0,a._)("div",null,[0==Ie.value?((0,a.wg)(),(0,a.iD)("p",K," ยังไม่ได้กดยอมรับ ")):(0,a.kq)("",!0)])])]),"Yes"==ge.value.check1?((0,a.wg)(),(0,a.iD)("div",Q,ee)):(0,a.kq)("",!0),(0,a._)("div",te,[le,(0,a._)("div",ae,[(0,a._)("div",se,[oe,(0,a.wy)((0,a._)("textarea",{class:"form-control border border-secondary","onUpdate:modelValue":l[2]||(l[2]=e=>Ee.value=e),rows:"3",id:"Textarea1"},null,512),[[i.nr,Ee.value]])])])]),(0,a._)("div",ie,[re,(0,a._)("div",ne,[(0,a._)("div",ce,["No"==ge.value.check1?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[0==Se.value?((0,a.wg)(),(0,a.iD)("button",de," ยังไม่ได้บันทึก ลายเซ็น ")):((0,a.wg)(),(0,a.iD)("button",{key:1,class:"btn btn-success",type:"button",onClick:l[3]||(l[3]=e=>Qe())}," รับทราบ "))],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[0==Se.value?((0,a.wg)(),(0,a.iD)("button",ue," ยังไม่ได้บันทึก ลายเซ็น ")):0==Pe.value?((0,a.wg)(),(0,a.iD)("button",ve," ยังไม่ได้อัพโหลด รูปภาพ ")):((0,a.wg)(),(0,a.iD)("button",{key:2,class:"btn btn-success",type:"button",onClick:l[4]||(l[4]=e=>Qe())}," รับทราบ "))],64))])])])]))]))}};const Ce=Se;var Ee=Ce}}]);
//# sourceMappingURL=757.e7773fc3.js.map